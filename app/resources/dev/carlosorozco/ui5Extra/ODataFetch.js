sap.ui.define(["sap/ui/model/odata/v2/ODataModel","sap/base/util/deepClone"],function(e,t){class s extends e{constructor(e,t){super(e,t)}static metadata={library:"dev.carlosorozco.ui5Extra"};static _requests=new Map;async read(e,t){await this.metadataLoaded();const s=await new Promise((s,r)=>{const a=this._resolver(t??{},s,r);const o=super.read(e,a);this._addRequest(o,t)});return s}async callFunction(e,t){const s=await new Promise((s,r)=>{const a=this._resolver(t??{},s,r);const o=super.callFunction(e,a);this._addRequest(o,t)});return s}async create(e,t,s){await this.metadataLoaded();const r=await new Promise((r,a)=>{const o=this._resolver(s??{},r,a);const n=super.create(e,t,o);this._addRequest(n,s)});return r}async update(e,t,s){await this.metadataLoaded();const r=await new Promise((r,a)=>{const o=this._resolver(s??{},r,a);const n=super.update(e,t,o);this._addRequest(n,s)});return r}async remove(e,t){await this.metadataLoaded();const s=await new Promise((s,r)=>{const a=this._resolver(t??{},s,r);const o=super.remove(e,a);this._addRequest(o,t)});return s}_resolver(e,s,r){this._abortRequest(e);const a={...e,success:(r,a)=>{this._removeRequest(e);const o=e?.success?.(t(r),t(a))??r;s({oData:o,oResponse:a})},error:t=>{this._removeRequest(e);const s=e?.error?.(t)??t;r(s)}};return a}_addRequest(e,t){const r=t?.aborterId;if(!r)return;s._requests.set(r,e)}_getRequest(e){const t=e?.aborterId;if(!t)return;return s._requests.get(t)}_abortRequest(e){const t=this._getRequest(e);t?.abort?.();return this._removeRequest(e)}_removeRequest(e){const t=e?.aborterId;if(!t)return false;return s._requests.delete(t)}}return s});
//# sourceMappingURL=ODataFetch.js.map