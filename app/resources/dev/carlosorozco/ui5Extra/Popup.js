sap.ui.define(["./library","sap/ui/base/ManagedObject","./util/Awaiter","./util/Icon"],function(t,e,s,o){function n(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const a=t["State"];const i=n(s);const c=n(o);const r="ui5Extra-notifications";const l=1e3;const u=e.extend("dev.carlosorozco.ui5Extra.Popup",{metadata:{library:"dev.carlosorozco.ui5Extra",properties:{title:{type:"string",group:"Appearance",defaultValue:""},text:{type:"string",group:"Appearance",defaultValue:""},maxLines:{type:"int",group:"Appearance",defaultValue:3},duration:{type:"int",group:"Appearance",defaultValue:3e3},state:{type:"dev.carlosorozco.ui5Extra.State",group:"Misc",defaultValue:a.None},showLoader:{type:"boolean",group:"Appearance",defaultValue:true},showClose:{type:"boolean",group:"Appearance",defaultValue:true},icon:{type:"sap.ui.core.URI",group:"Data",defaultValue:null},iconClose:{type:"sap.ui.core.URI",group:"Data",defaultValue:"sap-icon://decline"}},events:{onClose:{}}},constructor:function t(s,o){e.prototype.constructor.call(this,s,o)},show:async function t(){const e=this.createPopup();this.setContent(e);const s=this.createULArea();const o=this.getContent();if(!o)throw Error("No static area created");s.append(o);await i.tick();e.classList.add("show");this.autoClose();await new Promise(t=>{this.resolver=t})},autoClose:function t(){const e=this.getDuration();if(e<=0)return;this._closeTimeout=setTimeout(()=>{this.close()},e||3e3)},close:async function t(){const e=this.getContent();if(!e)return;e.classList.add("hide");e.classList.remove("show");await i.wait(250);if(this.resolver){this.fireOnClose();this.resolver()}clearTimeout(this._closeTimeout);e.remove();this.destroy(true);this.cleanULArea()},createPopup:function t(){const e=this.getState();const s=document.createElement("li");s.classList.add("Popup");s.classList.add(`state-${e.toLowerCase()}`);const o=this.createIcon();if(o){s.classList.add("show-icon");s.append(o)}const n=this.createBody();s.append(n);const a=this.createProgress();if(a)s.append(a);const i=this.createClose();if(i){s.classList.add("show-close");s.append(i)}return s},createIcon:function t(){let e;const s=this.getState();const o=s!==a.None?`message-${s.toLowerCase()}`:"";const n=this.getIcon()||o;if(n){e=document.createElement("span");e.classList.add("Icon");e.classList.add("sapUiIcon");const t=c.getIconInfo(n);if(t){e.style.fontFamily=t.fontFamily;e.setAttribute("data-sap-ui-icon-content",t.content)}}return e},createBody:function t(){const e=document.createElement("div");e.classList.add("Body");const s=this.getTitle();if(s){const t=document.createElement("h1");t.classList.add("Title");t.classList.add("sapMTitle");t.classList.add("sapMTitleStyleH4");t.setAttribute("title",s);t.innerText=s;e.append(t)}const o=this.getText();const n=document.createElement("span");n.classList.add("Message");n.classList.add("sapMLabel");const a=this.getMaxLines();n.style.webkitLineClamp=`${a}`;n.setAttribute("title",o);n.innerText=o;e.append(n);return e},createProgress:function t(){let e;const s=this.getDuration();const o=this.getShowLoader();if(s>0&&o){let t=s-250;if(t<0)t=0;e=document.createElement("div");e.classList.add("Progress");const o=document.createElement("div");o.classList.add("Loader");o.style.animationDuration=`${t}ms`;e.append(o)}return e},createClose:function t(){const e=this.getShowClose();const s=this.getDuration();let o;if(e||s<=0){o=document.createElement("span");o.classList.add("Close");o.classList.add("sapUiIcon");o.classList.add("sapUiIconPointer");const t=this.getIconClose();const e=c.getIconInfo(t);o.setAttribute("data-sap-ui-icon-content",e.content);o.style.fontFamily=e.fontFamily;o.addEventListener("click",()=>{this.close()})}return o},setContent:function t(e){this.oContent=e;return this},getContent:function t(){return this.oContent},createULArea:function t(){const e=sap.ui.getCore().getStaticAreaRef();let s=document.getElementById(r);if(!s){s=document.createElement("ul");s.id=r;s.classList.add("Notifications");e.append(s)}return s},cleanULArea:function t(){const e=document.getElementById(r);if(e&&!e.hasChildNodes()){e.remove()}},setDuration:function t(e){if(e>0&&e<l)e=l;this.setProperty("duration",e)}});return u});
//# sourceMappingURL=Popup.js.map